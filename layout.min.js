"use strict";function Integral(a){return a+.5>>0}var __extends=this&&this.__extends||function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();Object.defineProperty(exports,"__esModule",{value:!0});var POSITION;!function(a){a[a.LEFT_TOP=0]="LEFT_TOP",a[a.LEFT_CENTER=1]="LEFT_CENTER",a[a.LEFT_BOTTOM=2]="LEFT_BOTTOM",a[a.TOP_CENTER=3]="TOP_CENTER",a[a.CENTER=4]="CENTER",a[a.BOTTOM_CENTER=5]="BOTTOM_CENTER",a[a.RIGHT_TOP=6]="RIGHT_TOP",a[a.RIGHT_CENTER=7]="RIGHT_CENTER",a[a.RIGHT_BOTTOM=8]="RIGHT_BOTTOM"}(POSITION=exports.POSITION||(exports.POSITION={}));var EDGE;!function(a){a[a.START=1]="START",a[a.MIDDLE=0]="MIDDLE",a[a.END=2]="END"}(EDGE=exports.EDGE||(exports.EDGE={}));var FillMode;!function(a){a[a.STRETCH=4096]="STRETCH",a[a.CENTER=8192]="CENTER",a[a.ASPECTSTRETCH=12288]="ASPECTSTRETCH",a[a.ASPECTFILL=16384]="ASPECTFILL",a[a.NEARESTSTRETCH=20480]="NEARESTSTRETCH",a[a.MAPIN=24576]="MAPIN",a[a.NOBORDER=1]="NOBORDER",a[a.MAXIMUM=2]="MAXIMUM",a[a.NEAREST=4]="NEAREST",a[a.MASK_MAJOR=61440]="MASK_MAJOR"}(FillMode=exports.FillMode||(exports.FillMode={}));var Mask=function(){function a(){}return a.isset=function(a,b){return(b&a)==a},a.unset=function(a,b){return this.isset(a,b)?b&~a:b},a.set=function(a,b){return this.isset(a,b)?b:b|a},a}();exports.Mask=Mask;var ArrayT=function(){function a(){}return a.Clear=function(a,b,c){b&&a.forEach(b,c),a.length=0},a}();exports.Integral=Integral;var Point=function(){function a(a,b){void 0===a&&(a=0),void 0===b&&(b=0),this.x=a,this.y=b}return a.prototype.reset=function(a,b){return void 0===a&&(a=0),void 0===b&&(b=0),this.x=a,this.y=b,this},a.prototype.clone=function(){var b=new a;return b.x=this.x,b.y=this.y,b},a.prototype.copy=function(a){return this.x=a.x,this.y=a.y,this},a.prototype.addPoint=function(a){return this.x+=a.x,this.y+=a.y,this},a.prototype.subPoint=function(a){return this.x-=a.x,this.y-=a.y,this},a.prototype.add=function(a,b){return a&&(this.x+=a),b&&(this.y+=b),this},a.prototype.multiPoint=function(a){return this.x*=a.x,this.y*=a.y,this},a.prototype.scale=function(a,b){return null==b&&(b=a),this.x*=a,this.y*=b,this},a.prototype.isEqual=function(a){return this.x==a.x&&this.y==a.y},a.prototype.invert=function(){var a=this.x;return this.x=this.y,this.y=a,this},a.prototype.toString=function(){return this.x+","+this.y},a.prototype.fromString=function(a){if(null==a)return void(this.x=this.y=0);var b=a.split(",");this.x=parseFloat(b[0]),this.y=parseFloat(b[1])},a.AnchorCC=new a(.5,.5),a.AnchorLT=new a(0,0),a.AnchorLC=new a(0,.5),a.AnchorLB=new a(0,1),a.AnchorTC=new a(.5,0),a.AnchorBC=new a(.5,1),a.AnchorRT=new a(1,0),a.AnchorRC=new a(1,.5),a.AnchorRB=new a(1,1),a.Zero=new a,a}();exports.Point=Point;var Size=function(a){function b(b,c){return void 0===b&&(b=0),void 0===c&&(c=0),a.call(this,b,c)||this}return __extends(b,a),Object.defineProperty(b.prototype,"width",{get:function(){return this.x},set:function(a){this.x=a},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"height",{get:function(){return this.y},set:function(a){this.y=a},enumerable:!0,configurable:!0}),b.prototype.toRect=function(){return new Rect(0,0,this.width,this.height)},b.prototype.addSize=function(a){return this.x+=a.x,this.y+=a.y,this},b.Zero=new b,b}(Point);exports.Size=Size;var Polygon=function(){function a(){this._pts=new Array}return a.prototype.add=function(a){return this._pts.push(a),this},a.prototype.clear=function(){return this._pts.length=0,this},Object.defineProperty(a.prototype,"length",{get:function(){return this._pts.length},enumerable:!0,configurable:!0}),a}();exports.Polygon=Polygon;var EdgeInsets=function(){function a(a,b,c,d){void 0===a&&(a=0),void 0===b&&(b=0),void 0===c&&(c=0),void 0===d&&(d=0),this.top=a,this.bottom=b,this.left=c,this.right=d}return a.All=function(b){return new a(b,b,b,b)},a.prototype.add=function(a,b,c,d){return this.top+=a,this.bottom+=b,this.left+=c,this.right+=d,this},a.prototype.scale=function(a){return this.top*=a,this.bottom*=a,this.left*=a,this.right*=a,this},a.prototype.addEdgeInsets=function(a){return null==a?this:(this.top+=a.top,this.bottom+=a.bottom,this.left+=a.left,this.right+=a.right,this)},Object.defineProperty(a.prototype,"width",{get:function(){return this.left+this.right},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"height",{get:function(){return this.top+this.bottom},enumerable:!0,configurable:!0}),a.Width=function(a){return null==a?0:a.width},a.Height=function(a){return null==a?0:a.height},a.Top=function(a){return a?a.top:0},a.Left=function(a){return a?a.left:0},a}();exports.EdgeInsets=EdgeInsets;var Rect=function(){function a(a,b,c,d){void 0===a&&(a=0),void 0===b&&(b=0),void 0===c&&(c=0),void 0===d&&(d=0),this.x=a,this.y=b,this.width=c,this.height=d}return Object.defineProperty(a.prototype,"isnan",{get:function(){return isNaN(this.x)||isNaN(this.y)||isNaN(this.width)||isNaN(this.height)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"position",{get:function(){return new Point(this.x,this.y)},set:function(a){this.x=a.x,this.y=a.y},enumerable:!0,configurable:!0}),a.prototype.origin=function(a){return a?new Point(this.x+this.width*a.x,this.y+this.height*a.y):new Point(this.x,this.y)},a.prototype.setOrigin=function(a,b){return b?(this.x=a.x-this.width*b.x,this.y=a.y-this.height*b.y):(this.x=a.x,this.y=a.y),this},a.prototype.alignTo=function(a,b,c){return null==c&&(c=b),this.setPosition(a.getPosition(b),c),this},a.prototype.edgeTo=function(a,b){switch(b){case EDGE.START:this.setLeftTop(a.leftTop);break;case EDGE.MIDDLE:this.setCenter(a.center);break;case EDGE.END:this.setRightBottom(a.rightBottom)}return this},a.prototype.getPosition=function(a){switch(a){case POSITION.LEFT_TOP:return this.leftTop;case POSITION.LEFT_CENTER:return this.leftCenter;case POSITION.LEFT_BOTTOM:return this.leftBottom;case POSITION.CENTER:return this.center;case POSITION.TOP_CENTER:return this.topCenter;case POSITION.BOTTOM_CENTER:return this.bottomCenter;case POSITION.RIGHT_TOP:return this.rightTop;case POSITION.RIGHT_CENTER:return this.rightCenter;case POSITION.RIGHT_BOTTOM:return this.rightBottom}},a.prototype.setPosition=function(a,b){switch(b){case POSITION.LEFT_TOP:this.leftTop=a;break;case POSITION.LEFT_CENTER:this.leftCenter=a;break;case POSITION.LEFT_BOTTOM:this.leftBottom=a;break;case POSITION.CENTER:this.center=a;break;case POSITION.TOP_CENTER:this.topCenter=a;break;case POSITION.BOTTOM_CENTER:this.bottomCenter=a;break;case POSITION.RIGHT_TOP:this.rightTop=a;break;case POSITION.RIGHT_CENTER:this.rightCenter=a;break;case POSITION.RIGHT_BOTTOM:this.rightBottom=a}},Object.defineProperty(a.prototype,"size",{get:function(){return new Size(this.width,this.height)},set:function(a){this.width=a.width,this.height=a.height},enumerable:!0,configurable:!0}),a.prototype.setSize=function(a,b){return this.width=a,this.height=b,this},a.prototype.setX=function(a){return this.x=a,this},a.prototype.setY=function(a){return this.y=a,this},a.prototype.setWidth=function(a){return this.width=a,this},a.prototype.setHeight=function(a){return this.height=a,this},a.prototype.integral=function(){return this.x=Integral(this.x),this.y=Integral(this.y),this.width=Integral(this.width),this.height=Integral(this.height),this},a.prototype.invert=function(){var a=this,b=a.x;return a.x=a.y,a.y=b,b=a.width,a.width=a.height,a.height=b,a},a.prototype.clone=function(){var b=this,c=new a;return c.x=b.x,c.y=b.y,c.width=b.width,c.height=b.height,c},a.prototype.copy=function(a){var b=this;return b.x=a.x,b.y=a.y,b.width=a.width,b.height=a.height,b},a.prototype.applyEdgeInsets=function(a){return null==a?this:(this.x+=a.left,this.y+=a.top,this.width-=a.left+a.right,this.height-=a.top+a.bottom,this)},a.prototype.unapplyEdgeInsets=function(a){return null==a?this:(this.x-=a.left,this.y-=a.top,this.width+=a.left+a.right,this.height+=a.top+a.bottom,this)},a.prototype.applyAnchor=function(a,b){return this.x-=this.width*a,this.y-=this.height*b,this},a.prototype.unapplyAnchor=function(a,b){return this.x+=this.width*a,this.y+=this.height*b,this},a.prototype.containsPoint=function(a){return a.x>=this.x&&a.x<=this.x+this.width&&a.y>=this.y&&a.y<=this.y+this.height},a.ContainsPoint=function(a,b,c,d,e,f){return a>=c&&c+e>=a&&b>=d&&d+f>=b},a.Area=function(a){return a.width*a.height},a.Swap=function(a,b){var c=a.x,d=a.y,e=a.width,f=a.height;a.x=b.x,a.y=b.y,a.width=b.width,a.height=b.height,b.x=c,b.y=d,b.width=e,b.height=f},a.prototype.maxSize=function(a,b){return void 0!=a&&this.width>a&&(this.width=a),void 0!=b&&this.height>b&&(this.height=b),this},a.prototype.minSize=function(a,b){return void 0!=a&&this.width<a&&(this.width=a),void 0!=b&&this.height<b&&(this.height=b),this},a.prototype.isEqual=function(a){return this.x==a.x&&this.y==a.y&&this.width==a.width&&this.height==a.height},a.prototype.add=function(a,b,c,d){return this.x+=a,this.y+=b,c&&(this.width+=c),d&&(this.height+=d),this},a.prototype.union=function(a){var b=this.maxX,c=this.maxY;return this.x>a.x&&(this.x=a.x),this.y>a.y&&(this.y=a.y),b<a.maxX&&(this.width+=a.maxX-b),c<a.maxY&&(this.height+=a.maxY-c),this},a.prototype.deflate=function(a,b){return this.add(.5*a,.5*b,-a,-b)},a.prototype.deflateR=function(a,b){return this.deflate(this.width*a,this.height*b)},a.prototype.scale=function(a,b){return void 0==b?(this.x*=a,this.y*=a):(this.x-=(this.width*a-this.width)*b.x,this.y-=(this.height*a-this.height)*b.y),this.width*=a,this.height*=a,this},Object.defineProperty(a.prototype,"outterRadius",{get:function(){var a=Math.max(this.width,this.height);return Math.sqrt(a*a*2)/2},enumerable:!0,configurable:!0}),a.prototype.multiRect=function(a,b,c,d){return null!=a&&(this.x*=a),null!=b&&(this.y*=b),null!=c&&(this.width*=c),null!=d&&(this.height*=d),this},a.prototype.scaleWidth=function(a){return this.width*=a,this},a.prototype.scaleHeight=function(a){return this.height*=a,this},a.prototype.clipCenter=function(a,b){if(a){var c=this.width-a;this.x+=.5*c,this.width-=c}if(b){var c=this.height-b;this.y+=.5*c,this.height-=c}return this},a.prototype.reset=function(a,b,c,d){return void 0===a&&(a=0),void 0===b&&(b=0),void 0===c&&(c=0),void 0===d&&(d=0),this.x=a,this.y=b,this.width=c,this.height=d,this},Object.defineProperty(a.prototype,"minX",{get:function(){return this.x},set:function(a){this.x=a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"maxX",{get:function(){return this.x+this.width},set:function(a){this.x=a-this.width},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"minY",{get:function(){return this.y},set:function(a){this.y=a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"maxY",{get:function(){return this.y+this.height},set:function(a){this.y=a-this.height},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"minL",{get:function(){return Math.min(this.width,this.height)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"maxL",{get:function(){return Math.max(this.width,this.height)},enumerable:!0,configurable:!0}),a.prototype.toPolygon=function(){return(new Polygon).add(new Point(this.x,this.y)).add(new Point(this.x,this.y+this.height)).add(new Point(this.x+this.width,this.y+this.height)).add(new Point(this.x+this.width,this.y))},a.prototype.offset=function(a){return this.x+=a.x,this.y+=a.y,this},Object.defineProperty(a.prototype,"center",{get:function(){return new Point(this.x+.5*this.width,this.y+.5*this.height)},set:function(a){this.x=a.x-.5*this.width,this.y=a.y-.5*this.height},enumerable:!0,configurable:!0}),a.prototype.setCenter=function(a){return this.center=a,this},Object.defineProperty(a.prototype,"leftTop",{get:function(){return new Point(this.x,this.y)},set:function(a){this.x=a.x,this.y=a.y},enumerable:!0,configurable:!0}),a.prototype.setLeftTop=function(a){return this.leftTop=a,this},Object.defineProperty(a.prototype,"leftBottom",{get:function(){return new Point(this.x,this.y+this.height)},set:function(a){this.x=a.x,this.y=a.y-this.height},enumerable:!0,configurable:!0}),a.prototype.setLeftBottom=function(a){return this.leftBottom=a,this},Object.defineProperty(a.prototype,"rightTop",{get:function(){return new Point(this.x+this.width,this.y)},set:function(a){this.x=a.x-this.width,this.y=a.y},enumerable:!0,configurable:!0}),a.prototype.setRightTop=function(a){return this.rightTop=a,this},Object.defineProperty(a.prototype,"rightBottom",{get:function(){return new Point(this.x+this.width,this.y+this.height)},set:function(a){this.x=a.x-this.width,this.y=a.y-this.height},enumerable:!0,configurable:!0}),a.prototype.setRightBottom=function(a){return this.rightBottom=a,this},Object.defineProperty(a.prototype,"topCenter",{get:function(){return new Point(this.x+.5*this.width,this.y)},set:function(a){this.x=a.x-.5*this.width,this.y=a.y},enumerable:!0,configurable:!0}),a.prototype.setTopCenter=function(a){return this.topCenter=a,this},Object.defineProperty(a.prototype,"bottomCenter",{get:function(){return new Point(this.x+.5*this.width,this.y+this.height)},set:function(a){this.x=a.x-.5*this.width,this.y=a.y-this.height},enumerable:!0,configurable:!0}),a.prototype.setBottomCenter=function(a){return this.bottomCenter=a,this},Object.defineProperty(a.prototype,"leftCenter",{get:function(){return new Point(this.x,this.y+.5*this.height)},set:function(a){this.x=a.x,this.y=a.y-.5*this.height},enumerable:!0,configurable:!0}),a.prototype.setLeftCenter=function(a){return this.leftCenter=a,this},Object.defineProperty(a.prototype,"rightCenter",{get:function(){return new Point(this.x+this.width,this.y+.5*this.height)},set:function(a){this.x=a.x-this.width,this.y=a.y-.5*this.height},enumerable:!0,configurable:!0}),a.prototype.setRightCenter=function(a){return this.rightCenter=a,this},a.prototype.toString=function(){return this.x+","+this.y+","+this.width+","+this.height},Object.defineProperty(a.prototype,"nearest",{get:function(){return null==this._nearest?.1:this._nearest},enumerable:!0,configurable:!0}),a.prototype.fill=function(a,b){var c=this;if(0==c.width||0==c.height)return c;var d=!0;switch(b&FillMode.MASK_MAJOR){case FillMode.STRETCH:c.copy(a);break;case FillMode.MAPIN:this.maxX>a.maxX&&(this.maxX=a.maxX),this.maxY>a.maxY&&(this.maxY=a.maxY),this.minX<a.minX&&(this.minX=a.minX),this.minY<a.minY&&(this.minY=a.minY),d=!1;break;case FillMode.NEARESTSTRETCH:var e=c.width/a.width,f=c.height/a.height;f>e?(c.width/=f,c.height=a.height):(c.height/=e,c.width=a.width),e=c.width/a.width,f=c.height/a.height,Math.abs(e-f)<c.nearest&&c.copy(a);break;case FillMode.ASPECTSTRETCH:var e=c.width/a.width,f=c.height/a.height;f>e?(c.width/=f,c.height=a.height):(c.height/=e,c.width=a.width);break;case FillMode.ASPECTFILL:var e=c.width/a.width,f=c.height/a.height;f>e?(c.height/=e,c.width=a.width):(c.width/=f,c.height=a.height)}if(Mask.isset(FillMode.NOBORDER,b)){var g=a.width/a.height;c.width/a.width<c.height/a.height?c.width=c.height*g:c.height=c.width/g}if(Mask.isset(FillMode.NEAREST,b)){var e=c.width/a.width,f=c.height/a.height;Math.abs(e-f)<c.nearest&&(f>e?c.width/=e:c.height/=f)}return d&&(c.center=a.center),c},a.prototype.applyCartesian=function(a){var b=this;return b.y=a.height-b.y-b.height-a.y,b.x+=a.x,b},a.prototype.unapplyCartesian=function(a){var b=this;return b.y=a.height-b.y-a.y,b.x-=a.x,b},a.Zero=new a,a.Max=new a(-999999,-999999,999999,999999),a}();exports.Rect=Rect;var UnionRect=function(a){function b(b,c,d,e){var f=a.call(this)||this;return f.x=b,f.y=c,f.width=d,f.height=e,f}return __extends(b,a),b.prototype.union=function(b){var c=this;return null==c.x||null==c.y||null==c.width||null==c.height?(c.x=b.x,c.y=b.y,c.width=b.width,c.height=b.height,c):a.prototype.union.call(this,b)},b}(Rect);exports.UnionRect=UnionRect;var Layout=function(){function a(a){this._ctx=a}return a.prototype.useAnchor=function(a){return this.anchor=a,this},a.prototype.setRect=function(a){return null==this._orc?this._orc=a:(this._orc.x=a.x,this._orc.y=a.y,this._orc.width=a.width,this._orc.height=a.height),this._rc=this._orc.clone().applyEdgeInsets(this.edgeInsets),this},Object.defineProperty(a.prototype,"frame",{get:function(){return this._avaRect(),this._orc.clone()},set:function(a){this.setRect(a)},enumerable:!0,configurable:!0}),a.prototype._avaRect=function(){return this._orc?!1:(this._ctx?this._orc=this._ctx.boundsForLayout():(this._orc=new Rect,console.warn("没有设置 Box 的 Rect")),this._rc=this._orc.clone().applyEdgeInsets(this.edgeInsets),!0)},a.prototype.frameForLayout=function(){return this._avaRect(),this._rc.clone()},a.prototype.padding=function(a){return this.edgeInsets=a,0==this._avaRect()&&(this._rc=this._orc.clone().applyEdgeInsets(this.edgeInsets)),this},a.prototype.offset=function(a){return this._avaRect(),this._orc.offset(a),this._rc.offset(a),this},a.prototype.apply=function(){this._avaRect(),this._offset=0,this.view&&(this.view.setFrame(this._rc),this.setRect(this.view.boundsForLayout()))},a.prototype.complete=function(a,b){this._cbcomplete=a,this._ctxcomplete=b},a}();exports.Layout=Layout;var LinearSegment=function(){function a(){}return a.prototype.dispose=function(){this.obj=void 0,this.cb=void 0,this.ctx=void 0,this.data=void 0},a.prototype.setRect=function(a,b,c,d){this.cb?this.cb.call(this.ctx,this.obj,new Rect(a,b,c,d),this.data):this.obj&&this.obj.setFrame(new Rect(a,b,c,d),this.anchor)},a}();exports.LinearSegment=LinearSegment;var LinearLayout=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b._segments=new Array,b.spacing=0,b}return __extends(b,a),b.prototype.setSpacing=function(a){return this.spacing=a,this},b.prototype.clear=function(){ArrayT.Clear(this._segments,function(a){a.dispose()})},b.prototype.addPixel=function(a,b,c,d,e){var f=new LinearSegment;return f.val=a,f.isp=!0,f.obj=b,f.cb=c,f.ctx=d?d:this._ctx,f.data=e,f.anchor=this.anchor,this._segments.push(f),this},b.prototype.addFlex=function(a,b,c,d,e){var f=new LinearSegment;return f.val=a,f.isp=!1,f.obj=b,f.cb=c,f.ctx=d?d:this._ctx,f.data=e,f.anchor=this.anchor,this._segments.push(f),this},b.prototype.addPixelHBox=function(a,b,c,d){return this.addPixel(a,null,function(a,c,d){var e=new HBox(this).setRect(c);b.call(this,e,d),e.apply()},c,d),this},b.prototype.addPixelVBox=function(a,b,c,d){return this.addPixel(a,null,function(a,c,d){var e=new VBox(this).setRect(c);b.call(this,e,d),e.apply()},c,d),this},b.prototype.addFlexHBox=function(a,b,c,d){return this.addFlex(a,null,function(a,c,d){var e=new HBox(this).setRect(c);b.call(this,e,d),e.apply()},c,d),this},b.prototype.addFlexVBox=function(a,b,c,d){return this.addFlex(a,null,function(a,c,d){var e=new VBox(this).setRect(c);b.call(this,e,d),e.apply()},c,d),this},b.prototype.addAspect=function(a,b,c,d,e,f){return this.addPixel(a/b*this.against(),c,d,e,f)},b.prototype.addAspectHBox=function(a,b,c,d,e){return this.addPixelHBox(a/b*this.against(),c,d,e)},b.prototype.addAspectVBox=function(a,b,c,d,e){return this.addPixelVBox(a/b*this.against(),c,d,e)},b.prototype.apply=function(){var b=this;a.prototype.apply.call(this);var c=0,d=0;this._segments.forEach(function(a){a.isp?c+=a.val:d+=a.val},this);var e=this.length()-c,f=d?e/d:0;this._segments.forEach(function(a,c){var d=0;d=a.isp?a.val:a.val*f,b._offset+=b.setSegmentLength(d,a,c)},this),this._cbcomplete&&this._cbcomplete.call(this._ctxcomplete?this._ctxcomplete:this._ctx),this.clear()},b.prototype._spacingsLength=function(){var a=this;if(0==a.spacing)return 0;var b=a._segments.length;return b>1?a.spacing*(b-1):0},b.prototype.clipPixel=function(a,b,c,d,e,f,g){return void 0===c&&(c=1),void 0===d&&(d=1),0!=c&&this.addFlex(c),this.addPixel(a,b,e,f,g),0!=d&&this.addFlex(d),this},b.prototype.clipFlex=function(a,b,c,d,e,f,g){return 0!=c&&this.addPixel(c),this.addFlex(a,b,e,f,g),0!=d&&this.addPixel(d),this},b.prototype.clipPixelHBox=function(a,b,c,d,e,f){return void 0===c&&(c=1),void 0===d&&(d=1),0!=c&&this.addFlex(c),this.addPixelHBox(a,b,e,f),0!=d&&this.addFlex(d),this},b.prototype.clipFlexHBox=function(a,b,c,d,e,f){return 0!=c&&this.addPixel(c),this.addFlexHBox(a,b,e,f),0!=d&&this.addPixel(d),this},b.prototype.clipPixelVBox=function(a,b,c,d,e,f){return void 0===c&&(c=1),void 0===d&&(d=1),0!=c&&this.addFlex(c),this.addPixelVBox(a,b,e,f),0!=d&&this.addFlex(d),this},b.prototype.clipFlexVBox=function(a,b,c,d,e,f){return 0!=c&&this.addPixel(c),this.addFlexVBox(a,b,e,f),0!=d&&this.addPixel(d),this},b}(Layout);exports.LinearLayout=LinearLayout;var HBox=function(a){function b(b){return a.call(this,b)||this}return __extends(b,a),b.prototype.length=function(){return this._rc.width-this._spacingsLength()},b.prototype.against=function(){return this._avaRect(),this._rc.height},b.prototype.setSegmentLength=function(a,b,c){var d=this;return b.setRect(d._offset+d._rc.x,d._rc.y,a,d._rc.height),d.spacing&&c+1<d._segments.length&&(a+=d.spacing),a},b}(LinearLayout);exports.HBox=HBox;var VBox=function(a){function b(b){return a.call(this,b)||this}return __extends(b,a),b.prototype.length=function(){return this._rc.height-this._spacingsLength()},b.prototype.against=function(){return this._avaRect(),this._rc.width},b.prototype.setSegmentLength=function(a,b,c){var d=this;return b.setRect(d._rc.x,d._offset+d._rc.y,d._rc.width,a),d.spacing&&c+1<d._segments.length&&(a+=d.spacing),a},b}(LinearLayout);exports.VBox=VBox;var FlowOption;!function(a){a[a.Fix=0]="Fix",a[a.Stretch=1]="Stretch"}(FlowOption=exports.FlowOption||(exports.FlowOption={}));var FlowSegment=function(){function a(){}return a.prototype.dispose=function(){this.obj=void 0,this.cb=void 0,this.ctx=void 0,this.data=void 0},a.prototype.setRect=function(a,b,c){this.cb?this.cb.call(this.ctx,this.obj,new Rect(a,b,c,this.h),this.data):this.obj&&this.obj.setFrame(new Rect(a,b,c,this.h),this.anchor)},a}();exports.FlowSegment=FlowSegment;var HFlow=function(a){function b(b){var c=a.call(this,b)||this;return c._segments=new Array,c}return __extends(b,a),b.prototype.clear=function(){ArrayT.Clear(this._segments,function(a){a.dispose()})},b.prototype.addSize=function(a,b,c,d,e,f,g){void 0===c&&(c=0);var h=new FlowSegment;return h.w=a,h.h=b,h.option=c,h.obj=d,h.cb=e,h.ctx=f?f:this._ctx,h.data=g,h.anchor=this.anchor,this._segments.push(h),this},b.prototype.apply=function(){var b=this;a.prototype.apply.call(this),this._avaRect(),this.position=this._rc.leftTop;var c=this._rc.width,d=(this._rc.height,0),e=0,f=new Array;this._segments.forEach(function(a){d+a.w<=c?(d+=a.w,e<a.h&&(e=a.h),f.push(a)):(b.applyRows(f,b.position,c),ArrayT.Clear(f),b.position.y+=e,d=a.w,e=a.h,f.push(a))},this),f.length&&(this.applyRows(f,this.position,c),ArrayT.Clear(f),this.position.y+=e),this._cbcomplete&&this._cbcomplete.call(this._ctxcomplete?this._ctxcomplete:this._ctx),this.clear()},b.prototype.applyRows=function(a,b,c){var d=this;this._offset=0;var e=0,f=0;a.forEach(function(a){a.option==FlowOption.Stretch&&(e+=1),f+=a.w},this),e=e?(c-f)/e:0,a.forEach(function(a){var c=a.w;a.option==FlowOption.Stretch&&(c+=e),a.setRect(d._offset+b.x,b.y,c),d._offset+=c})},b}(Layout);exports.HFlow=HFlow;